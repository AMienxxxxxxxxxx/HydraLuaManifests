name: Mirror ManifestHub to this repo
on:
  workflow_dispatch:

jobs:
  mirror:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ”§ Install Git
        run: |
          sudo apt-get update -y
          sudo apt-get install -y git

      - name: ðŸ“¥ Clone source repository as mirror
        run: |
          SRC="https://github.com/SteamAutoCracks/ManifestHub.git"
          TMP="mirror-repo.git"
          git clone --mirror "$SRC" "$TMP"

      - name: ðŸš€ Push mirror into this repository
        env:
          GHTOKEN: ${{ secrets.PERSONAL_TOKEN }}
        run: |
          cd mirror-repo.git
          git remote set-url --push origin "https://x-access-token:${GHTOKEN}@github.com/${{ github.repository }}.git"
          git push --mirror --force
